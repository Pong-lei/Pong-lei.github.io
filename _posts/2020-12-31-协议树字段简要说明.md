## App协议树结构
```
dpi
  |___app_root 
         |_____app_group（http）x=0
         |           |___app（web-video）AppIdx x=0
         |           |    |___sub_app(you_ku) SubAppIdx  x=0
         |           |    |      |____app_1 (you_ku_1) VersionIdx_1 x=0
         |           |    |      |____app_2 (you_ku_2) VersionIdx_2
         |           |    |      |____app_3 (you_ku_3) VersionIdx_3
         |           |    |      |____...... x=3
         |           |    |____......x=1
         |           |
         |           |___app（http下载）x=1
         |           |__...... x=2
         |____app_group(传统协议) x=1
         |____...... x=2
```


## insert_root
主要函数入口 
 ### App_x(应用版本)___AppId高8位
 0x**00** ~~000000~~ 
```
名称：VersionIdx
判断：VERSION_INDEX（）
生成：insert_version（）
访问：root.children.vec[x].children.vec[x].children.vec[x].children.vec[x]
其他：拼接在zh_name后，一般为（1，2，3，4，5等）区分应用的版本，如name=you-ku_1
```
### SubApp（子协议）___AppId低8位
0x~~000000~~ **00**
```
名称：SubAppIdx
判断：SUB_APP_INDEX（）
生成：insert_sub_app（）
root.children.vec[x].children.vec[x].children.vec[x]
其他：同一协议下区分不同子协议，如优酷网与土豆网（子协议）同属于网页视频（协议）
```
### App（协议）___AppId次低8位
0x~~0000~~ **00** ~~00~~
```
名称：AppIdx
判断：APP_INDEX（）
生成：insert_app（）
访问：root.children.vec[x].children.vec[x]
其他：同一协议组下不同协议，如HTTP协议（协议组）下的网页视频与HTTP下载（协议）
```
### AppGroup（协议组）___AppId次高8位
0x~~00~~ **00** ~~0000~~
```
判断：GROUP_INDEX()
生成：insert_group（）
访问：root.children.vec[x]
其他：协议组，如HTTP协议、传统协议、P2P下载
```
---
## 其他字段
以下字段在ini文件中有意义时，代码需要做的处理，各字段所属的list存放的都是该应用的AppIdx，存放顺序从0开始累加，存放数量有限制(不同类型，数量不一致)
- p2p=yes
```
生成：dpi_insert_p2p_id（）
访问：dpi->p2p_appid_list[x]
```
- http_multi=yes
```
生成：dpi_insert_http_multi_id()
访问：dpi->http_multi_appid_list[x]
```
- dns=[T]xxxxx.xxx
```
生成：dpi_insert_dns_id（）
访问：dpi->dns_appid_list[x]
```
- fake=yes;xxx
```
生成：dpi_insert_fake_id（）
访问：dpi->fake_appid_list[x]
```
![流程图](D:/%E6%B5%81%E7%A8%8B%E5%9B%BE.png)



